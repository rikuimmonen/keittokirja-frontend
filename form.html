<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8"/>
    <title>Lisää uusi resepti</title>
    <link href="style.css" rel="stylesheet">
</head>

<body>
<div id="wrapper">
    <header id="header">
        <h1>
            <img src="logo.svg" alt="Reseptikirja">
        </h1>

        <nav>
            <ul>
                <li><a href="">Etusivu</a></li>
                <li><a href="">Reseptit</a></li>
                <li><a href="">Lisää resepti</a></li>
                <li><a href="">Asetukset</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <article id="app-recipe">
            <header>
                <h1>Lisää uusi resepti</h1>
            </header>

            <form action="http://localhost:3000/recipe" method="post" enctype="multipart/form-data">
                <fieldset id="meta">
                    <legend>Reseptin tiedot</legend>
                    <p>
                        <label for="recipeTitle">Otsikko</label>
                        <input type="text" id="recipeTitle" name="recipeTitle"/>
                    </p>

                    <p>
                        <label for="recipeImage">Kuva</label>
                        <input type="file" id="recipeImage" name="recipeImage"/>
                    </p>

                    <p>
                        <label for="recipeSize">Annosmäärä</label>
                        <input type="number" step="1" id="recipeSize" name="recipeSize"/>
                    </p>

                    <p>
                        <label for="recipeTime">Valmistusaika (min)</label>
                        <input type="number" step="1" id="recipeTime" name="recipeTime"/>
                    </p>
                </fieldset>
                <fieldset id="ingredients">
                    <legend>Ainesosat</legend>
                    <ul>
                        <li>
                            <label for="ingredient-1">Ainesosa</label>
                            <input type="text" name="recipeIngredient" id="ingredient-1"/>
                        </li>
                    </ul>

                    <p>
                        <button type="button" id="add-ingredient">Lisää rivi</button>
                    </p>
                </fieldset>

                <fieldset id="directions">
                    <legend>Valmistus</legend>
                    <ol>
                        <li>
                            <label for="direction-1">Työvaihe </label>
                            <textarea id="direction-1" name="recipeDirection"></textarea>
                        </li>
                    </ol>

                    <p>
                        <button type="button" id="add-direction">Lisää rivi</button>
                    </p>
                </fieldset>

                <p>
                    <button>Tallenna resepti</button>
                </p>
            </form>
        </article>
    </main>
</div>

<script>
  const ingredientsList = document.querySelector('#ingredients ul');
  const ingredientInput = (i) => {
    return `
        <li id="add-ingredient-${i}">
        <label for="ingredient-${i}">Ainesosa</label>
        <input type="text" name="recipeIngredient" id="ingredient-${i}" class="ingredients">
        <button id="delete-ingredient-${i}" type="button">Poista rivi</button>
        </li>
        `;
  };
  const newIngredientButton = document.querySelector('#add-ingredient');

  newIngredientButton.addEventListener('click', () => {
    let i = ingredientsList.children.length + 1;

    ingredientsList.insertAdjacentHTML('beforeend', ingredientInput(i));

    document.querySelector('#delete-ingredient-' + i).addEventListener('click', () => {
      ingredientsList.removeChild(
          document.querySelector('#add-ingredient-' + i),
      );
    });
  });

  const directionsList = document.querySelector('#directions ol');
  const directionInput = (i) => {
    return `
        <li id="add-direction-${i}">
        <label for="direction-${i}">Työvaihe</label>
        <textarea name="recipeDirection" id="direction-${i}" class="directions"></textarea>
        <button id="delete-direction-${i}" type="button">Poista rivi</button>
        </li>
        `;
  };
  const newDirectionButton = document.querySelector('#add-direction');

  newDirectionButton.addEventListener('click', () => {
    let i = directionsList.children.length + 1;

    directionsList.insertAdjacentHTML('beforeend', directionInput(i));

    document.querySelector('#delete-direction-' + i).addEventListener('click', () => {
      directionsList.removeChild(
          document.querySelector('#add-direction-' + i),
      );
    });
  });
</script>
</body>
</html>